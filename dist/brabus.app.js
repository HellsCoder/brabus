!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r,o=function(){function t(){this.pushRoutes=[],this.currentPath=window.location.pathname.substr(1),this.setClickHandler()}return t.prototype.setClickHandler=function(){var t=this;document.querySelectorAll("a").forEach((function(e){if(e.hasAttribute("href")){var n=e.getAttribute("href");"/"===n.substr(0,1)&&e.addEventListener("click",(function(e){e.preventDefault(),t.go(n)}))}}))},t.prototype.setErrorHandler=function(t){this.errorCallback=t},t.prototype.go=function(t){-1!=navigator.userAgent.toLowerCase().indexOf("gecko")?(window.history.pushState("","",t),window.history.replaceState("","",t)):window.location.hash=t,this.currentPath=t.substr(1),this.callRoute()},t.prototype.pushRoute=function(t){this.pushRoutes.push(t)},t.prototype.callRoute=function(){for(var t=0;t<this.pushRoutes.length;t++){var e=this.pushRoutes[t];if(e.route.substr(1)===this.currentPath)return e.callback(),!0}return this.errorCallback&&this.errorCallback(),!1},t}(),i=function(){function t(){}return t.prototype.setRenderParams=function(t){this.params=t},t.prototype.getRenderParams=function(){return this.params},t.prototype.unpack=function(){var t=this.params.element.parentElement;t.innerHTML=t.innerHTML.replace(this.params.element.outerHTML,this.params.element.innerHTML),this.params.getRender().draw(this.params.globalVariables)},t.prototype.remove=function(){this.params.element.parentElement;this.params.element.remove(),this.params.getRender().draw(this.params.globalVariables)},t}(),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getObject=function(){return"b-if"},e.prototype.render=function(){return this.getRenderParams().compiledAttribute?this.unpack():this.remove()},e}(i),a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getObject=function(){return"b-for"},e.prototype.render=function(){for(var t=this.getRenderParams().compiledAttribute,e=this.getRenderParams().element.innerHTML,n="",r=0;r<t.length;r++){var o=t[r];n+=this.getRenderParams().getRender().replaceAllVars(e,o)}this.getRenderParams().element.innerHTML=n,this.unpack()},e}(i),l=function(){function t(){}return t.process=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){if(4===n.readyState)if(200===n.status){if(!e)return;e(n.responseText)}else console.info("[BRABUS] Failed to send request")},n.send()},t}(),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.getObject=function(){return"b-tpl"},e.prototype.render=function(){var t=this;this.getRenderParams().getRender().drawFile(this.getRenderParams().compiledAttribute,this.getRenderParams().globalVariables,this.getRenderParams().element).finish((function(){t.unpack()}))},e}(i),h=function(){function t(t,e){this.cache=[],this.objects=[new f,new s,new c],this.element=t,this.router=e}return t.prototype.draw=function(t){this.compileScene(t,this.element)},t.prototype.drawComponent=function(t){var e,n=this,r=function(e,r){var o=n.getBlockByContent(e,"template"),i=n.getBlockByContent(e,"style");r.innerHTML=o;for(var u=document.createElement("style"),s=n.getCssRulesByText(i),a=0;a<s.length;a++){var c=s[a],l=c.selectorText,p=r.querySelector(l),f="b-"+Math.random().toString(36).substring(3);p.classList.add(f),u.innerHTML+="."+f+"{"+c.style.cssText+"}"}document.body.appendChild(u),n.draw(t.variables)};return t.element||(t.element=this.element),this.cache.forEach((function(n){if(n.fileUrl===t.componentUrl)return r(n.content,t.element),e()})),l.process(t.componentUrl,(function(o){return n.cache.push({fileUrl:t.componentUrl,content:o}),r(o,t.element),e()})),{finish:function(t){e=t}}},t.prototype.drawFile=function(t,e,n){var r,o=this;return n||(n=this.element),this.cache.forEach((function(i){i.fileUrl===t&&(n.innerHTML=i.content,o.draw(e),r())})),l.process(t,(function(i){n.innerHTML=i,o.cache.push({fileUrl:t,content:i}),o.draw(e),r()})),{finish:function(t){r=t}}},t.prototype.getMainDrawElement=function(){return this.element},t.prototype.compileScene=function(t,e){for(var n=this,r=0;r<this.objects.length;r++)for(var o=this.objects[r],i=e.getElementsByTagName(o.getObject()),u=0;u<i.length;u++){var s=i[u];if(!this.checkIsUnpackedParents(s))if(s.hasAttribute("var")){var a=this.compileAttribute(t,s.getAttribute("var"));o.setRenderParams({element:s,compiledAttribute:a,globalVariables:t,getRender:function(){return n}}),o.render()}else s.remove()}this.router.setClickHandler()},t.prototype.replaceAllVars=function(t,e){var n,r=(n=[],function t(e,r){Object.keys(e).forEach((function(o){e[o]instanceof Array||e[o]instanceof Object?t(e[o],r?r+"."+o:o):n.push({path:"{{"+(r?r+"."+o:o)+"}}",value:e[o]})}))}(e,""),n);for(var o in r){var i=r[o];t=t.split(i.path).join(i.value)}return t},t.prototype.checkIsUnpackedParents=function(t){for(;null!==t.parentElement;){for(var e=0;e<this.objects.length;e++)if(this.objects[e].getObject()===t.parentElement.tagName.toLocaleLowerCase())return!0;t=t.parentElement}return!1},t.prototype.getCssRulesByText=function(t){var e=document.implementation.createHTMLDocument(""),n=document.createElement("style");return n.textContent=t,e.body.appendChild(n),n.sheet.cssRules},t.prototype.getBlockByContent=function(t,e){var n;if(document.getElementById("utils")?(n=document.getElementById("utils")).innerHTML=t:((n=document.createElement("div")).id="utils",n.style.display="none",n.innerHTML=t),!n.querySelector(e))return"";var r=n.querySelector(e).innerHTML;return n.innerHTML="",r},t.prototype.compileAttribute=function(t,e){var n=!1;return"!"===e.substr(0,1)&&(e=e.substr(1),n=!0),"~"===e.substr(0,1)?e.substr(1):"false"==e?!!n:"true"==e?!n:!(!t[e]&&0!=t[e])&&(1==t[e]||0==t[e]?n?!t[e]:t[e]:"false"===t[e]?!!n:"true"===t[e]?!n:t[e])},t}(),d=function(){function t(t,e){this.element=t,this.router=e}return t.prototype.select=function(t){var e=this,n=this.element.querySelector(t);return n?{element:n,value:function(t){return t?(n.value=t,t):n.value},content:function(t){if(!t)return n.innerHTML;n.innerHTML=t,e.router.setClickHandler()}}:null},t}(),m=new(function(){function t(t){this.element=t,this.router=new o,this.render=new h(this.element,this.router),this.brabusQuery=new d(this.element,this.router)}return t.prototype.run=function(t){this.router.callRoute(),t&&this.render.draw(t)},t.prototype.onRoute=function(t,e){var n={route:t,callback:e};this.router.pushRoute(n)},t.prototype.setErrorHandler=function(t){this.router.setErrorHandler(t)},t.prototype.getRender=function(){return this.render},t.prototype.getNetwork=function(t,e){var n;e&&(t+="?"+new URLSearchParams(e));return l.process(t,(function(t){n&&n(t)})),{finish:function(t){n=t}}},t.prototype.getQuery=function(){return this.brabusQuery},t}())(document.getElementById("root"));m.onRoute("/test",(function(){console.info("Пользователь перешел на /test")})),m.setErrorHandler((function(){console.info("Пользователь перешел на несуществующую ссылку")})),m.run({testVariable:!0})}]);